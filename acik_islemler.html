<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AÃ§Ä±k Ä°ÅŸlemler</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:#f3f6f7;
}

header{
  padding:14px 16px;
  background:#ffffff;
  box-shadow:0 4px 14px rgba(0,0,0,.08);
  font-weight:800;
  font-size:18px;
}

.container{
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:18px;
}

/* ===== KART ===== */
.trade-card{
  background:#fff;
  border-radius:18px;
  padding:16px;
  box-shadow:0 12px 30px rgba(0,0,0,.08);
  border-top:6px solid #9ca3af;
}

.trade-card.green{ border-color:#16a34a }
.trade-card.yellow{ border-color:#facc15 }
.trade-card.red{ border-color:#dc2626 }

.card-title{
  font-size:16px;
  font-weight:800;
  margin-bottom:6px;
}

.card-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.asset{
  font-size:18px;
  font-weight:800;
}

.source{
  font-size:12px;
  font-weight:700;
  padding:4px 8px;
  border-radius:999px;
  background:#e5e7eb;
}

.line{
  display:flex;
  justify-content:space-between;
  font-size:14px;
  margin:4px 0;
}

.hr{
  height:1px;
  background:#e5e7eb;
  margin:10px 0;
}

/* RR */
.rr-bar{
  width:100%;
  height:12px;
  background:#e5e7eb;
  border-radius:999px;
  overflow:hidden;
}

.rr-fill{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#facc15,#16a34a);
  transition:.4s;
}

.rr-text{
  font-size:13px;
  font-weight:700;
  margin-top:4px;
  text-align:right;
}

.status{
  margin-top:10px;
  padding:10px;
  border-radius:12px;
  font-weight:700;
  font-size:14px;
}

.status.yellow{ background:#fef9c3;color:#92400e }
.status.green{ background:#dcfce7;color:#166534 }
.status.red{ background:#fee2e2;color:#991b1b }
</style>
</head>

<body>

<header>ğŸ“Š AÃ§Ä±k Ä°ÅŸlemler</header>
<div class="container" id="list"></div>

<script>
/* ================================
   DEMO AÃ‡IK Ä°ÅLEMLER
================================ */
const trades=[
{
  name:"BTCUSDT Ä°ÅLEM KARTI",
  symbol:"BTCUSDT",
  type:"coin",
  entry:66800,
  stop:66100,
  tp1:67500,
  rrTarget:1
},
{
  name:"ALKA Ä°ÅLEM KARTI",
  symbol:"THYAO.IS",
  type:"stock",
  entry:250,
  stop:245,
  tp1:258,
  rrTarget:1
}
];

/* ================================
   FÄ°YAT KAYNAKLARI
================================ */
async function getPrice(symbol,type){
  try{
    if(type==="coin"){
      const r=await fetch(
        `https://api.binance.com/api/v3/ticker/price?symbol=${symbol}`
      );
      const j=await r.json();
      return {price:parseFloat(j.price),source:"ğŸŸ¢ CANLI"};
    }else{
      const r=await fetch(
        `https://query1.finance.yahoo.com/v7/finance/quote?symbols=${symbol}`
      );
      const j=await r.json();
      const p=j.quoteResponse.result[0]?.regularMarketPrice;
      return {price:p,source:"ğŸŸ¡ GECÄ°KMELÄ°"};
    }
  }catch(e){
    return {price:null,source:"âš ï¸ VERÄ° YOK"};
  }
}

/* ================================
   KART OLUÅTUR
================================ */
function createCard(t){
  let price=t.entry;
  let closed50=false;
  let closed=false;

  const card=document.createElement("div");
  card.className="trade-card yellow";

  card.innerHTML=`
    <div class="card-title">${t.name}</div>

    <div class="card-header">
      <div class="asset">${t.symbol}</div>
      <div class="source">â³</div>
    </div>

    <div class="line"><span>CanlÄ± Fiyat</span><b class="price">-</b></div>
    <div class="line"><span>AlÄ±ÅŸ</span><b>${t.entry}</b></div>
    <div class="line"><span>Stop</span><b>${t.stop}</b></div>

    <div class="hr"></div>

    <div class="line"><span>TP1</span><b>${t.tp1}</b></div>
    <div class="line"><span>RR Hedef</span><b>${t.rrTarget}R</b></div>

    <div class="rr-bar"><div class="rr-fill"></div></div>
    <div class="rr-text">RR: 0.00R</div>

    <div class="status yellow">ğŸŸ¡ Bekleniyor</div>
  `;

  const priceEl=card.querySelector(".price");
  const rrFill=card.querySelector(".rr-fill");
  const rrText=card.querySelector(".rr-text");
  const status=card.querySelector(".status");
  const sourceEl=card.querySelector(".source");

  function rr(p){
    return Math.abs(p-t.entry)/Math.abs(t.entry-t.stop);
  }

  async function tick(){
    if(closed) return;

    const data=await getPrice(t.symbol,t.type);
    if(!data.price) return;

    price=data.price;
    priceEl.innerText=price.toFixed(2);
    sourceEl.innerText=data.source;

    const r=rr(price);
    rrText.innerText=`RR: ${r.toFixed(2)}R`;
    rrFill.style.width=Math.min(r/t.rrTarget*100,100)+"%";

    if(!closed50 && price>=t.tp1){
      closed50=true;
      status.innerText="ğŸŸ¡ %50 KapatÄ±ldÄ± â€“ RR Takibi Aktif";
    }

    if(closed50 && r>=t.rrTarget){
      closed=true;
      card.className="trade-card green";
      status.className="status green";
      status.innerText="ğŸŸ¢ RR Hedefi TamamlandÄ±";
    }

    if(price<=t.stop){
      closed=true;
      card.className="trade-card red";
      status.className="status red";
      status.innerText="ğŸ”´ Stop Oldu";
    }
  }

  setInterval(tick,15000);
  tick();
  return card;
}

/* ================================
   LÄ°STE
================================ */
const list=document.getElementById("list");
trades.forEach(t=>list.appendChild(createCard(t)));
</script>

</body>
</html>