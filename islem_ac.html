<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yeni Ä°ÅŸlem AÃ§</title>

<style>
*{
  box-sizing:border-box;
  font-family:"Times New Roman", serif;
}

body{
  margin:0;
  padding:16px;
  background:#f2f4f6;
}

.card{
  background:#ffffff;
  border-radius:16px;
  padding:16px;
  margin-bottom:16px;
  box-shadow:0 4px 10px rgba(0,0,0,0.06);
}

.card h2{
  margin:0 0 12px 0;
  font-size:18px;
  font-weight:bold;
  text-align:center;
}

label{
  display:block;
  margin-bottom:6px;
}

input, select{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid #ddd;
  font-size:15px;
}

.row{
  display:flex;
  gap:12px;
}

.row > div{
  flex:1;
}

.badge-group{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:center;
}

.badge{
  padding:10px 16px;
  background:#eef1f4;
  border-radius:20px;
  font-size:14px;
  cursor:pointer;
}

.badge.active{
  background:#2ecc71;
  color:white;
}

.center{text-align:center;}

.btn{
  width:100%;
  padding:16px;
  border:none;
  border-radius:16px;
  font-size:16px;
  font-weight:bold;
}

.btn-green{background:#2ecc71;color:white;}
.btn-red{background:#e74c3c;color:white;}
.btn-yellow{background:#f1c40f;}

.btn[disabled]{
  opacity:.5;
}

.risk-text{
  margin-top:8px;
  text-align:right;
  font-weight:bold;
  color:#e74c3c;
}
</style>
</head>

<body>

<!-- ğŸ’ VARLIK -->
<div class="card">
  <h2>ğŸ’ VarlÄ±k</h2>
  <input placeholder="ALKA / BTCUSDT">
  <div class="center" style="margin-top:8px;font-weight:bold;">ğŸ”´ CanlÄ± Fiyat: --</div>
</div>

<!-- ğŸ“ˆ TREND -->
<div class="card">
  <h2>ğŸ“ˆ Trend YÃ¶nÃ¼</h2>
  <div class="badge-group" id="trendGroup">
    <div class="badge active">YÃ¼kselen</div>
    <div class="badge">DÃ¼ÅŸen</div>
    <div class="badge">Yatay</div>
  </div>
</div>

<!-- â³ ZAMAN -->
<div class="card">
  <h2>â³ Zaman Dilimi</h2>
  <div class="badge-group">
    <div class="badge">5m</div>
    <div class="badge active">15m</div>
    <div class="badge">1h</div>
    <div class="badge">4h</div>
    <div class="badge">1D</div>
  </div>
</div>

<!-- ğŸ¦ KASA -->
<div class="card center">
  <h2>ğŸ¦ Kasa</h2>
  <div style="font-size:22px;font-weight:bold;">12.500 TL</div>
</div>

<!-- ğŸ“Œ GÄ°RÄ°Å -->
<div class="card">
  <h2>ğŸ“Œ GiriÅŸ</h2>
  <input id="fiyat" placeholder="GiriÅŸ FiyatÄ±">
  <div class="row" style="margin-top:10px;">
    <div><input id="adet" placeholder="Adet"></div>
    <div><input id="tutar" placeholder="Tutar (TL)"></div>
  </div>
</div>

<!-- ğŸ›‘ STOP -->
<div class="card">
  <h2>ğŸ›‘ Stop</h2>
  <select id="stopYuzde">
    <option value="0.5">0.5%</option>
    <option value="1" selected>1%</option>
    <option value="2">2%</option>
  </select>

  <input id="stopFiyat" style="margin-top:10px;" placeholder="Stop FiyatÄ±">
  <div id="riskText" class="risk-text"></div>
</div>

<!-- ğŸš€ HEDEF -->
<div class="card">
  <h2>ğŸš€ Hedef</h2>
  <div class="row">
    <div><input placeholder="TP1"></div>
    <div><input placeholder="TP2"></div>
    <div><input placeholder="TP3"></div>
  </div>
</div>

<!-- BUTONLAR -->
<div class="card">
  <button class="btn btn-yellow">ğŸš¨ Otomatik Ä°ÅŸlem SonlandÄ±r</button><br><br>
  <button class="btn btn-red">âš ï¸ Manuel Ä°ÅŸlem SonlandÄ±r</button><br><br>
  <button id="islemBtn" class="btn btn-green" disabled>âš¡ Ä°ÅLEM BAÅLAT âš¡</button>
</div>

<script>
const fiyat=document.getElementById("fiyat");
const adet=document.getElementById("adet");
const tutar=document.getElementById("tutar");
const stopYuzde=document.getElementById("stopYuzde");
const stopFiyat=document.getElementById("stopFiyat");
const riskText=document.getElementById("riskText");
const islemBtn=document.getElementById("islemBtn");

let manuelOnay=false;
let manuelDegisti=false;

adet.addEventListener("input",()=>{
  if(fiyat.value) tutar.value=(adet.value*fiyat.value).toFixed(2);
});
tutar.addEventListener("input",()=>{
  if(fiyat.value) adet.value=(tutar.value/fiyat.value).toFixed(2);
});

function otomatikStop(){
  if(!fiyat.value) return;
  const yuzde=parseFloat(stopYuzde.value);
  const giris=parseFloat(fiyat.value);
  const stop=giris-(giris*yuzde/100);
  stopFiyat.value=stop.toFixed(2);
  riskText.innerText="";
  manuelDegisti=false;
  manuelOnay=false;
  islemBtn.disabled=false;
}

stopYuzde.addEventListener("change",otomatikStop);
fiyat.addEventListener("blur",otomatikStop);

stopFiyat.addEventListener("input",()=>{
  manuelDegisti=true;
});

stopFiyat.addEventListener("blur",()=>{
  if(!manuelDegisti || !fiyat.value) return;

  const giris=parseFloat(fiyat.value);
  const yuzde=parseFloat(stopYuzde.value);
  const idealStop=giris-(giris*yuzde/100);
  const manuel=parseFloat(stopFiyat.value);

  if(manuel<idealStop){
    const asim=((idealStop-manuel)/giris*100).toFixed(2);
    riskText.innerText=`+%${asim} Risk`;
    islemBtn.disabled=true;

    const onay=confirm(
      "âš ï¸ Stop seÃ§ilen yÃ¼zdeyi aÅŸÄ±yor!\n\n" +
      `Ã–nerilen Stop: ${idealStop.toFixed(2)}\n`+
      `GirdiÄŸin Stop: ${manuel}\n\n`+
      "Bu riski bilerek devam etmek istiyor musun?"
    );

    if(onay){
      manuelOnay=true;
      islemBtn.disabled=false;
    }else{
      stopFiyat.value=idealStop.toFixed(2);
      riskText.innerText="";
    }
  }else{
    riskText.innerText="";
    islemBtn.disabled=false;
  }
});
</script>

</body>
</html>