<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yeni Ä°ÅŸlem AÃ§</title>

<style>
*{box-sizing:border-box;font-family:"Times New Roman",serif;}
body{margin:0;padding:16px;background:#f2f4f6;}
.card{background:#fff;border-radius:16px;padding:16px;margin-bottom:16px;box-shadow:0 4px 10px rgba(0,0,0,.06);}
.card h2{text-align:center;margin:0 0 12px;font-size:18px;font-weight:bold;}
input,select{width:100%;padding:12px;border-radius:12px;border:1px solid #ddd;font-size:15px;}
.row{display:flex;gap:12px;}
.row>div{flex:1;}
.badge-group{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;}
.badge{padding:10px 16px;background:#eef1f4;border-radius:20px;font-size:14px;cursor:pointer;}
.badge.active{background:#2ecc71;color:#fff;}
.center{text-align:center;}
.btn{width:100%;padding:16px;border:none;border-radius:16px;font-size:16px;font-weight:bold;}
.btn-green{background:#2ecc71;color:#fff;}
.btn-red{background:#e74c3c;color:#fff;}
.btn-yellow{background:#f1c40f;}
.btn[disabled]{opacity:.5;}
.status{margin-top:10px;text-align:center;font-weight:bold;}
</style>
</head>

<body>

<!-- GÄ°RÄ°Å -->
<div class="card">
  <h2>ğŸ“Œ GiriÅŸ</h2>
  <input id="fiyat" placeholder="GiriÅŸ FiyatÄ±">
  <div class="row" style="margin-top:10px;">
    <div><input id="adet" placeholder="Adet"></div>
    <div><input id="tutar" placeholder="Tutar (TL)"></div>
  </div>
</div>

<!-- STOP -->
<div class="card">
  <h2>ğŸ›‘ Stop</h2>
  <select id="stopYuzde">
    <option value="0.5">0.5%</option>
    <option value="1" selected>1%</option>
    <option value="2">2%</option>
  </select>
  <input id="stopFiyat" style="margin-top:10px;" placeholder="Stop FiyatÄ±">
</div>

<!-- RR / HEDEF -->
<div class="card">
  <h2>ğŸš€ Hedef (RR)</h2>
  <div class="badge-group" id="rrGroup">
    <div class="badge" data-rr="1">1R</div>
    <div class="badge" data-rr="1.5">1.5R</div>
    <div class="badge" data-rr="2">2R</div>
    <div class="badge" data-rr="2.5">2.5R</div>
    <div class="badge" data-rr="3">3R</div>
  </div>
  <input id="tp1" style="margin-top:12px;" placeholder="TP1 (Otomatik)">
</div>

<!-- DURUM -->
<div class="card center">
  <h2>ğŸ“Š Ä°ÅŸlem Durumu</h2>
  <div id="statusText" class="status">HenÃ¼z iÅŸlem yok</div>
</div>

<!-- BUTONLAR -->
<div class="card">
  <button id="autoBtn" class="btn btn-yellow" disabled>ğŸš¨ Otomatik Ä°ÅŸlem SonlandÄ±r</button><br><br>
  <button class="btn btn-red">âš ï¸ Manuel Ä°ÅŸlem SonlandÄ±r</button><br><br>
  <button id="islemBtn" class="btn btn-green" disabled>âš¡ Ä°ÅLEM BAÅLAT âš¡</button>
</div>

<script>
const fiyat=document.getElementById("fiyat");
const adet=document.getElementById("adet");
const tutar=document.getElementById("tutar");
const stopYuzde=document.getElementById("stopYuzde");
const stopFiyat=document.getElementById("stopFiyat");
const rrBadges=document.querySelectorAll("#rrGroup .badge");
const tp1=document.getElementById("tp1");
const islemBtn=document.getElementById("islemBtn");
const autoBtn=document.getElementById("autoBtn");
const statusText=document.getElementById("statusText");

let rr=null;
let tp1Hit=false;
let kalanOran=1;

adet.oninput=()=>{ if(fiyat.value) tutar.value=(adet.value*fiyat.value).toFixed(2); };
tutar.oninput=()=>{ if(fiyat.value) adet.value=(tutar.value/fiyat.value).toFixed(2); };

function hesaplaStop(){
  if(!fiyat.value) return;
  const g=parseFloat(fiyat.value);
  const y=parseFloat(stopYuzde.value);
  stopFiyat.value=(g-(g*y/100)).toFixed(2);
}
stopYuzde.onchange=hesaplaStop;
fiyat.onblur=hesaplaStop;

rrBadges.forEach(b=>{
  b.onclick=()=>{
    rrBadges.forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    rr=parseFloat(b.dataset.rr);
    hesaplaTP();
  };
});

function hesaplaTP(){
  if(!fiyat.value || !stopFiyat.value || !rr) return;
  const g=parseFloat(fiyat.value);
  const s=parseFloat(stopFiyat.value);
  const tp=g+((g-s)*rr);
  tp1.value=tp.toFixed(2);
  islemBtn.disabled=false;
  autoBtn.disabled=false;
}

islemBtn.onclick=()=>{
  statusText.innerText="ğŸŸ¡ Ä°ÅŸlem AÃ§Ä±ldÄ± â€“ TP1 Bekleniyor";
};

autoBtn.onclick=()=>{
  if(!tp1Hit){
    tp1Hit=true;
    kalanOran=0.5;
    statusText.innerText="ğŸŸ¢ %50 KapatÄ±ldÄ± â€“ RR Takibi Aktif";
  }else{
    kalanOran=0;
    statusText.innerText="ğŸŸ¢ TP1 Geri DÃ¶nÃ¼ÅŸ â€“ Ä°ÅŸlem TamamlandÄ±";
  }
};
</script>

</body>
</html>