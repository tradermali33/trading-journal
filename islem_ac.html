<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yeni Ä°ÅŸlem AÃ§</title>

<style>
*{box-sizing:border-box;font-family:"Times New Roman",serif;}
body{margin:0;padding:16px;background:#f2f4f6;}
.card{background:#fff;border-radius:16px;padding:16px;margin-bottom:16px;box-shadow:0 4px 10px rgba(0,0,0,.06);}
.card h2{text-align:center;margin:0 0 14px;font-size:18px;font-weight:bold;}
.center{text-align:center;}
input{width:100%;padding:12px;border-radius:12px;border:1px solid #ddd;font-size:15px;}
.row{display:flex;gap:12px;}
.row>div{flex:1;}
.badge-group{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;}
.badge{padding:10px 18px;background:#eef1f4;border-radius:20px;font-size:14px;cursor:pointer;}
.badge.active{background:#2ecc71;color:#fff;}
.btn{width:100%;padding:16px;border:none;border-radius:16px;font-size:16px;font-weight:bold;cursor:pointer;}
.btn-green{background:#2ecc71;color:#fff;}
.btn-red{background:#e74c3c;color:#fff;}
.btn-yellow{background:#f1c40f;}
.btn[disabled]{opacity:.5;cursor:not-allowed;}
.warning{color:#e74c3c;font-weight:bold;margin-top:8px;}
.footer-back{text-align:center;font-size:18px;margin-top:20px;}
</style>
</head>

<body>

<!-- TARÄ°H -->
<div class="card center">
  <div style="font-size:18px;font-weight:bold;">ğŸ’° 12.12.2012 Pazartesi ğŸ’°</div>
</div>

<!-- VARLIK -->
<div class="card">
  <h2>ğŸ’ VarlÄ±k</h2>
  <input placeholder="ALKA / BTCUSDT">
  <div class="center" style="margin-top:8px;font-weight:bold;">ğŸ”´ CanlÄ± Fiyat: --</div>
</div>

<!-- KASA -->
<div class="card center">
  <h2>ğŸ¦ Kasa</h2>
  <div style="font-size:22px;font-weight:bold;">12.500 TL</div>
</div>

<!-- GÄ°RÄ°Å -->
<div class="card">
  <h2>ğŸ“Œ GiriÅŸ</h2>
  <input id="giris" placeholder="GiriÅŸ FiyatÄ±">
  <div class="row" style="margin-top:10px;">
    <div><input id="adet" placeholder="Adet"></div>
    <div><input id="tutar" placeholder="Tutar (TL)"></div>
  </div>
</div>

<!-- STOP -->
<div class="card">
  <h2>ğŸ›‘ Stop</h2>
  <div class="badge-group" id="stopGroup">
    <div class="badge" data-stop="0.5">0.5%</div>
    <div class="badge active" data-stop="1">1%</div>
    <div class="badge" data-stop="2">2%</div>
  </div>
  <input id="stopFiyat" style="margin-top:10px;" placeholder="Stop FiyatÄ±">
  <div id="stopUyari" class="warning" style="display:none;"></div>
</div>

<!-- STOP ONAY -->
<div class="card" id="stopOnayCard" style="display:none;">
  <h2>âš ï¸ Stop OnayÄ±</h2>
  <div class="center warning" id="stopOnayText"></div>
  <div class="row" style="margin-top:12px;">
    <div><button id="onayBtn" class="btn btn-green">âœ… Onayla</button></div>
    <div><button id="iptalBtn" class="btn btn-red">âŒ VazgeÃ§</button></div>
  </div>
</div>

<!-- BUTONLAR -->
<div class="card">
  <button id="autoBtn" class="btn btn-yellow" disabled>ğŸš¨ Otomatik Ä°ÅŸlem SonlandÄ±r</button><br><br>
  <button id="manualBtn" class="btn btn-red" disabled>âš ï¸ Manuel Ä°ÅŸlem SonlandÄ±r</button><br><br>
  <button id="startBtn" class="btn btn-green" disabled>âš¡ Ä°ÅLEM BAÅLAT âš¡</button>
</div>

<!-- SON KASA -->
<div class="card center" id="sonKasa" style="display:none;">
  <h2>ğŸ Ä°ÅŸlem SonrasÄ± Kasa</h2>
  <div style="font-size:22px;font-weight:bold;">12.300 TL</div>
</div>

<div class="footer-back">â†©ï¸ Geri</div>

<script>
let seciliStop = 1;
let stopOnay = false;

const giris = document.getElementById("giris");
const adet = document.getElementById("adet");
const tutar = document.getElementById("tutar");
const stopFiyat = document.getElementById("stopFiyat");
const stopUyari = document.getElementById("stopUyari");
const stopOnayCard = document.getElementById("stopOnayCard");
const stopOnayText = document.getElementById("stopOnayText");
const startBtn = document.getElementById("startBtn");
const autoBtn = document.getElementById("autoBtn");
const manualBtn = document.getElementById("manualBtn");
const sonKasa = document.getElementById("sonKasa");

document.querySelectorAll("#stopGroup .badge").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll("#stopGroup .badge").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    seciliStop = parseFloat(b.dataset.stop);
    stopOnay=false;
    kontrolStop();
  };
});

adet.oninput=()=>{ if(giris.value) tutar.value=(adet.value*giris.value).toFixed(2); };
tutar.oninput=()=>{ if(giris.value) adet.value=(tutar.value/giris.value).toFixed(2); };

function kontrolStop(){
  if(!giris.value || !stopFiyat.value) return;
  const g = parseFloat(giris.value);
  const s = parseFloat(stopFiyat.value);
  const yuzde = ((g-s)/g*100).toFixed(2);

  if(yuzde > seciliStop){
    stopUyari.style.display="block";
    stopUyari.innerText=`âš ï¸ Stop %${yuzde} oldu (SeÃ§ilen %${seciliStop} aÅŸÄ±ldÄ±)`;
    stopOnayCard.style.display="block";
    stopOnayText.innerText=`Devam etmek iÃ§in onay gerekir`;
    startBtn.disabled=true;
  }else{
    stopUyari.style.display="none";
    stopOnayCard.style.display="none";
    startBtn.disabled=false;
  }
}

stopFiyat.oninput=kontrolStop;
giris.oninput=kontrolStop;

document.getElementById("onayBtn").onclick=()=>{
  stopOnay=true;
  stopOnayCard.style.display="none";
  startBtn.disabled=false;
};

document.getElementById("iptalBtn").onclick=()=>{
  stopFiyat.value="";
  stopOnayCard.style.display="none";
  startBtn.disabled=true;
};

startBtn.onclick=()=>{
  if(stopUyari.style.display==="block" && !stopOnay){
    alert("Stop onayÄ± gerekli");
    return;
  }
  autoBtn.disabled=false;
  manualBtn.disabled=false;
  alert("Ä°ÅŸlem baÅŸlatÄ±ldÄ±");
};

manualBtn.onclick=()=>{
  sonKasa.style.display="block";
};
</script>

</body>
</html>