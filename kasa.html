<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Kasa</title>

<style>
*{box-sizing:border-box;font-family:"Times New Roman",serif;}
:root{
  --r:18px;
  --pad:16px;
  --shadow:0 10px 28px rgba(0,0,0,.12);
  --press:linear-gradient(120deg, rgba(255,255,255,.35), rgba(255,255,255,0));
}
body{
  margin:0;padding:16px;min-height:100vh;
  background:#f2f4f6;color:#0f172a;
}
body.dark{
  background:#0b1220;color:#e5e7eb;
}
.card{
  background:#ffffff;border-radius:var(--r);padding:var(--pad);
  margin-bottom:16px;box-shadow:var(--shadow);
}
body.dark .card{background:#111827;}
/* ÃœST SABÄ°T ÅERÄ°T */
.topbar{display:flex;gap:12px}
.pill{
  flex:1;display:flex;align-items:center;justify-content:center;gap:8px;
  border-radius:14px;padding:12px;font-weight:bold;cursor:pointer;
  position:relative;overflow:hidden;
}
.pill::after{
  content:"";position:absolute;inset:0;opacity:0;transition:.2s;
  background:var(--press);
}
.pill:active::after{opacity:1}
.pill.active{outline:3px solid #3b82f6}
body.dark .pill{background:#0f172a;color:#e5e7eb}
body.light .pill{background:#e5e7eb;color:#0f172a}

/* TARÄ°H */
.date{text-align:center;font-weight:bold}

/* BAÅLIK (ZIT TEMA) */
.invert{
  text-align:center;font-size:18px;font-weight:bold;
}
body.light .invert{background:#111827;color:#fff}
body.dark .invert{background:#f9fafb;color:#111}

/* DEÄER */
.center{text-align:center}
.big{font-size:20px;font-weight:bold}

/* GÃœNLÃœK K/Z */
.pos{color:#16a34a;font-weight:bold}
.neg{color:#dc2626;font-weight:bold}

/* FORM */
input{
  width:100%;padding:14px;border-radius:14px;border:1px solid #cbd5f5;
  font-size:15px;background:transparent;color:inherit;
}
.row{display:flex;gap:12px}
.row>div{flex:1}
.btn{
  width:100%;padding:14px;border:none;border-radius:14px;
  font-size:15px;font-weight:bold;cursor:pointer;position:relative;overflow:hidden;
}
.btn::after{
  content:"";position:absolute;inset:0;opacity:0;transition:.15s;
  background:linear-gradient(120deg, rgba(255,255,255,.4), rgba(255,255,255,0));
}
.btn:active::after{opacity:1}
.green{background:#16a34a;color:#fff}
.red{background:#dc2626;color:#fff}

/* GERÄ° */
.back{
  display:flex;align-items:center;justify-content:center;gap:8px;
  padding:16px;border-radius:16px;font-weight:bold;cursor:pointer;
}
body.light .back{background:#e5e7eb}
body.dark .back{background:#0f172a}
</style>
</head>

<body class="light">

<!-- ÃœST SABÄ°T: TEMA & DÄ°L -->
<div class="card">
  <div class="topbar">
    <div id="themeBtn" class="pill active">ğŸŒ™ Tema</div>
    <div id="langTR" class="pill active">ğŸŒ TR</div>
    <div id="langEN" class="pill">ğŸŒ EN</div>
  </div>
</div>

<!-- TARÄ°H -->
<div class="card date" id="date"></div>

<!-- KASA BAÅLIK (ZIT TEMA) -->
<div class="card invert">ğŸ¦ Kasa</div>

<!-- KASA DEÄERÄ° -->
<div class="card center">
  <div class="big" id="totalTL">0 TL</div>
  <div class="big" id="totalUSD">= 0 $</div>
</div>

<!-- GÃœNLÃœK KAR / ZARAR -->
<div class="card">
  <div class="center" style="font-weight:bold;margin-bottom:8px">GÃ¼nlÃ¼k Kar / Zarar Durumu</div>
  <div>Kar : <span class="pos" id="kar">0 TL</span></div>
  <div>Zarar : <span class="neg" id="zarar">0 TL</span></div>
  <div style="margin-top:8px">
    GÃ¼nlÃ¼k Kar/Zarar OranÄ± :
    <span id="oran" class="pos">% 0 â–²</span>
  </div>
</div>

<!-- NAKÄ°T GÄ°RÄ°Å / Ã‡IKIÅ -->
<div class="card">
  <div class="center" style="font-weight:bold;margin-bottom:8px">Toplam Nakit GiriÅŸ / Ã‡Ä±kÄ±ÅŸ Bilgisi</div>
  <input id="amount" placeholder="Tutar (TL)" type="number"/>
  <div class="row" style="margin-top:12px">
    <div><button class="btn green" onclick="deposit()">â• YatÄ±r</button></div>
    <div><button class="btn red" onclick="withdraw()">â– Ã‡ek</button></div>
  </div>
</div>

<!-- GERÄ° -->
<div class="card back" onclick="history.back()">â†©ï¸ Geri</div>

<script>
/* === PERSIST === */
const S = {
  theme: localStorage.getItem("theme") || "light",
  lang: localStorage.getItem("lang") || "tr",
  total: Number(localStorage.getItem("total")) || 125000,
  kar: Number(localStorage.getItem("kar")) || 1250,
  zarar: Number(localStorage.getItem("zarar")) || 320
};
document.body.className = S.theme;

/* === UI INIT === */
const themeBtn = document.getElementById("themeBtn");
const langTR = document.getElementById("langTR");
const langEN = document.getElementById("langEN");

function syncLang(){
  langTR.classList.toggle("active", S.lang==="tr");
  langEN.classList.toggle("active", S.lang==="en");
}
syncLang();

/* === TEMA === */
themeBtn.onclick=()=>{
  S.theme = (S.theme==="light")?"dark":"light";
  document.body.className = S.theme;
  localStorage.setItem("theme", S.theme);
};

/* === DÄ°L === */
langTR.onclick=()=>{S.lang="tr";localStorage.setItem("lang","tr");syncLang()};
langEN.onclick=()=>{S.lang="en";localStorage.setItem("lang","en");syncLang()};

/* === TARÄ°H === */
const d=new Date();
const daysTR=["Pazar","Pazartesi","SalÄ±","Ã‡arÅŸamba","PerÅŸembe","Cuma","Cumartesi"];
document.getElementById("date").innerText=
`${d.getDate().toString().padStart(2,"0")}.${(d.getMonth()+1).toString().padStart(2,"0")}.${d.getFullYear()} ${daysTR[d.getDay()]}`;

/* === KUR === */
let USDTRY=32.47;
fetch("https://api.exchangerate.host/latest?base=TRY&symbols=USD")
.then(r=>r.json()).then(j=>{
  if(j?.rates?.USD) USDTRY = 1/j.rates.USD;
  render();
}).catch(render);

/* === HESAP === */
function render(){
  document.getElementById("totalTL").innerText =
    S.total.toLocaleString("tr-TR")+" TL";
  document.getElementById("totalUSD").innerText =
    "= "+Math.round(S.total/USDTRY).toLocaleString("en-US")+" $";

  document.getElementById("kar").innerText = "+"+S.kar.toLocaleString("tr-TR")+" TL";
  document.getElementById("zarar").innerText = "-"+S.zarar.toLocaleString("tr-TR")+" TL";
  const net = S.kar - S.zarar;
  const oran = ((net/S.total)*100).toFixed(1);
  const oranEl = document.getElementById("oran");
  oranEl.innerText = `% ${oran} ${oran>=0?"â–²":"â–¼"}`;
  oranEl.className = oran>=0?"pos":"neg";
  localStorage.setItem("total",S.total);
  localStorage.setItem("kar",S.kar);
  localStorage.setItem("zarar",S.zarar);
}
render();

/* === BUTONLAR === */
function deposit(){
  const v=Number(amount.value||0); if(!v) return;
  S.total+=v; S.kar+=v; amount.value=""; render();
}
function withdraw(){
  const v=Number(amount.value||0); if(!v) return;
  S.total-=v; S.zarar+=v; amount.value=""; render();
}
</script>
</body>
</html>